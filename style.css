:root{
  --bg:#0a0f1e; --glass:rgba(17,26,54,.65); --tx:#e8eeff;
  --n1:#5ee0ff; --n2:#8b5bff; --n3:#ff3f88;
  --good:#10b981; --bad:#ef4444;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; min-height:100%;
  background:linear-gradient(180deg,#0a0f1e,#090e1c 60%);
  color:var(--tx); font-family:-apple-system,Segoe UI,Roboto,Arial;
}
.hidden{display:none!important}
.center{display:flex;align-items:center;justify-content:center}

/* Cards & Buttons */
.card{background:var(--glass);border:1px solid rgba(255,255,255,.08);
  border-radius:16px;backdrop-filter:blur(6px);box-shadow:0 12px 40px rgba(0,0,0,.25);padding:28px}
.bigbtn{padding:16px 22px;border-radius:14px;border:none;font-size:20px;font-weight:800;
  cursor:pointer;color:#fff;background:linear-gradient(90deg,var(--n2),var(--n3));width:100%;margin:8px 0}
.btn{position:relative;padding:14px 16px;border-radius:12px;border:1px solid #27345d;background:#111a36;
  color:var(--tx);font-weight:800;font-size:18px;cursor:pointer;transition:.15s}
.btn[disabled]{opacity:.45;cursor:not-allowed}
.badge{display:inline-flex;gap:8px;align-items:center;background:linear-gradient(90deg,#1a2246,#111a36);
  border:1px solid #223160;border-radius:999px;padding:8px 12px;margin-top:10px;font-size:13px}
.badge .ok{color:#9effc9}.badge .lock{color:#ffc36a}

/* Neon lock */
.lockedBtn{background:rgba(20,20,40,.6)!important;border-color:#3a2a6e!important;color:#9aa0c6!important;
  box-shadow:0 0 12px rgba(139,91,255,.55), inset 0 0 18px rgba(94,224,255,.12)}
.lockIcon{position:absolute;left:16px;top:50%;transform:translateY(-50%);
  font-size:20px;text-shadow:0 0 8px #8b5bff,0 0 14px #5ee0ff}
.shake{animation:shake .35s cubic-bezier(.36,.07,.19,.97) 1}
@keyframes shake{
  10%,90%{transform:translateX(-1px)}
  20%,80%{transform:translateX(2px)}
  30%,50%,70%{transform:translateX(-4px)}
  40%,60%{transform:translateX(4px)}
}

/* Layout */
#lobby,#combatMenu,#practiceMenu{height:100vh}
.box{max-width:720px;width:92%;text-align:center}
#game{display:grid;grid-template-columns:320px 1fr;gap:18px;padding:18px}
@media(max-width:900px){#game{grid-template-columns:1fr} #side{order:2}}
#side,#main{padding:16px}
.hudTitle{font-size:14px;letter-spacing:.12em;text-transform:uppercase;color:#bcd1ff;opacity:.9}
.metric{display:flex;align-items:center;justify-content:space-between;margin:14px 0}
.metric .label{font-size:16px;color:#cfe2ff;opacity:.9}
.metric .value{font-weight:900;font-size:22px;background:linear-gradient(90deg,var(--n1),var(--n2),var(--n3));
  -webkit-background-clip:text;color:transparent}
.hint{font-size:12px;color:#cfe2ff;opacity:.85;margin-top:8px}
.bar{height:10px;width:90%;max-width:700px;margin:8px auto;border-radius:999px;background:#0f1830;border:1px solid #23365f;overflow:hidden}
.bar>span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--n1),var(--n2),var(--n3));transition:width .25s}

/* Q&A */
.q{font-size:64px;font-weight:900;margin:16px 0;background:linear-gradient(90deg,var(--n1),var(--n2),var(--n3));
  -webkit-background-clip:text;color:transparent;text-align:center}
.options{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:10px auto;max-width:760px}
.opt{background:rgba(255,255,255,.06);padding:22px;border-radius:14px;font-size:44px;font-weight:900;text-align:center;
  border:2px solid transparent;cursor:pointer;transition:.12s}
.opt.correct{background:rgba(16,185,129,.18);border-color:var(--good)}
.opt.wrong{background:rgba(239,68,68,.18);border-color:var(--bad)}
.topSwitch{position:fixed;top:12px;right:12px;font-size:12px;padding:8px 12px;border-radius:10px;background:rgba(255,255,255,.12);
  backdrop-filter:blur(4px);cursor:pointer;z-index:5}
#startWrap{display:flex;align-items:center;justify-content:center;margin:20px 0}
#startBtn{padding:16px 22px;border-radius:14px;border:none;font-size:20px;font-weight:800;cursor:pointer;color:#fff;background:linear-gradient(90deg,var(--n1),var(--n3))}
#summary{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;backdrop-filter:blur(3px);z-index:40}
#sumBox{background:#0f1830;border:1px solid #27345d;border-radius:16px;padding:20px;max-width:680px;width:92%;text-align:center}

/* Confetti */
#confetti{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:50}
.conf{position:absolute;width:10px;height:14px;opacity:.9;will-change:transform}

/* Modals */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.65);display:flex;align-items:center;justify-content:center;z-index:1000}
.modal-box{background:#0f1830;border:1px solid #27345d;border-radius:16px;color:#e8eeff;max-width:880px;width:92%;
  max-height:90vh;overflow:auto;padding:24px}
.modal-head{display:flex;justify-content:space-between;gap:8px;align-items:center;margin-bottom:12px}
.modal-body{font-size:16px;line-height:1.55}
.targets-grid{display:grid;gap:12px}
.targets-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:14px}
.targets-hint{font-size:12px;color:#cfe2ff;opacity:.85;margin-top:8px}

