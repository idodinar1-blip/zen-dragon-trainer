<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Zen Dragon Trainer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- ×”××¤×œ×™×§×¦×™×” × ×˜×¢× ×ª ×œ×›××Ÿ ×¢×œ ×™×“×™ game.js -->
  <div id="app"></div>

  <!-- ğŸ”” ××•×“××œ ×”×•×¨××•×ª (× ×©×œ×˜ ××›××Ÿ ×‘×œ×‘×“ â€“ ××™×Ÿ ×”×–×¨×§×” ×‘-game.js) -->
  <div id="instructionsModal" class="hidden" style="
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
      background:rgba(0,0,0,.65); z-index:1000;">
    <div class="card" style="max-width:880px; width:92%; max-height:90vh; overflow:auto; text-align:start;">
      <div style="display:flex; gap:8px; justify-content:space-between; align-items:center; margin-bottom:12px;">
        <button id="insClose" class="btn">âœ–</button>
        <button id="insLang" class="btn">×¢×‘×¨×™×ª</button>
      </div>
      <div id="insContent" style="font-size:16px; line-height:1.55;"></div>
    </div>
  </div>

  <!-- ğŸ”¤ ×˜×§×¡×˜×™ ×”×”×•×¨××•×ª + ×œ×•×’×™×§×ª ×”××•×“××œ -->
  <script>
  // × ×•×¡×—×™× ××œ××™× ×œ×¤×™ ××” ×©×‘×™×§×©×ª
  const INS_HE = `
  <div dir="rtl" style="text-align:right">
  <h2>×”×•×¨××•×ª ×©×™××•×©</h2>

  <h3>××” ×”××˜×¨×”?</h3>
  ××™××•×Ÿ ×××•×§×“ ×œ×¤×™×ª×•×— ××”×™×¨×•×ª, ×“×™×•×§ ×•×‘×™×˜×—×•×Ÿ ×‘×—×™×©×•×‘ ×‘×¨××©: ×œ×•×— ×›×¤×œ, ×—×–×§×•×ª, ×©×•×¨×©×™× ×•×©×‘×¨×™×.<br>
  ×”××©×—×§ ×××ª×¨ ××ª ×”×—×•×œ×©×•×ª ×©×œ×š ×‘×–××Ÿ ×××ª ×•×“×•×—×£ ××•×ª×š ×œ×”×©×ª×¤×¨ ×‘×¦×•×¨×” ×—×›××” ×•×”×“×¨×’×ª×™×ª.

  <h3>××¦×‘×™ ××©×—×§</h3>
  <b>âš”ï¸ ××¦×‘ ×§×¨×‘ (Combat)</b><br>
  ×ª×¨×’×•×œ ××©×•×œ×‘ ××›×œ ×”× ×•×©××™×, ×œ×¤×™ ×¨××ª ×§×•×©×™. ×œ××—×¨ ×›×œ ×§×¨×‘ ×ª×•×¤×™×¢ ×˜×‘×œ×ª ×”×™×©×’×™×, × ×™×ª×•×— ×‘×™×¦×•×¢×™×, ×•×”××œ×¦×” ××“×•×™×§×ª ××” ×œ×—×–×§.
  <br><br>
  <b>ğŸ“š ××¦×‘ ×ª×¨×’×•×œ (Practice)</b><br>
  ×‘×—×™×¨×” ×©×œ × ×•×©× ××—×“ ×•×”×¢××§×” ×‘×•. ×˜×¢×•×™×•×ª × ×©××¨×•×ª ×•××•×¤×™×¢×•×ª ××—×“×© ×‘××™××•×Ÿ ×™×™×¢×•×“×™ ×œ× ×˜×¨×•×œ ×—×•×œ×©×•×ª ×œ××•×¨×š ×–××Ÿ.

  <h3>××™×š ××ª×—×™×œ×™×?</h3>
  ×‘×•×—×¨×™× ×¨××” â†’ Start Battle. ×”×–××Ÿ ××ª×—×™×œ ×œ×”×™××“×“ ×¨×§ ××”×¨×’×¢ ×©×œ×•×—×¦×™× ×¢×œ Start.

  <h3>××™×š ×¢×•× ×™×?</h3>
  ××§×©×™ 1â€“4 ××• ×œ×—×™×¦×” ×¢×œ ×”××¤×©×¨×•×ª ×‘××¡×š. ×ª×©×•×‘×” × ×›×•× ×” ×ª× ×’×Ÿ ×¦×œ×™×œ ×§×¦×¨.

  <h3>×§×¨×™×˜×¨×™×•× ×™× ×œ×¢×œ×™×™×ª ×¨××”</h3>
  (×××•×¦×¢ ×©×œ 3 ×”×§×¨×‘×•×ª ×”××—×¨×•× ×™×)<br>
  â€¢ ×“×™×•×§ â‰¥ 95%<br>
  â€¢ ×–××Ÿ ×××•×¦×¢ ×œ×©××œ×” â‰¤ 1.50 ×©× ×™×•×ª<br>
  â€¢ â‰¤ 3 ×˜×¢×•×™×•×ª ×œ×§×¨×‘

  <h3>×”Ö¾HUD (×œ×•×— ×”×ª×§×“××•×ª ×‘×¦×“)</h3>
  ××¦×™×’ × ×ª×•× ×™× ××©×œ×•×©×ª ×”×§×¨×‘×•×ª ×”××—×¨×•× ×™×: ×“×™×•×§ ×××•×¦×¢, ×–××Ÿ ×ª×©×•×‘×” ×××•×¦×¢, ×›××•×ª ×˜×¢×•×™×•×ª, ×•Ö¾Weak Topics â€” × ×•×©××™× ×©××ª×” ××ª×§×©×” ×‘×”×.

  <h3>××™×š ××–×•×”×•×ª ×—×•×œ×©×•×ª?</h3>
  <b>â± ×–××Ÿ ×ª×’×•×‘×” ××™×˜×™:</b> ×× ×‘×™×•×ª×¨ ×Ö¾50% ××”×©××œ×•×ª ×‘× ×•×©× ××¡×•×™× ×”×™×™×ª ××™×˜×™ ××”×××•×¦×¢ ×©×œ×š â€” ×”×•× ×™×¡×•××Ÿ ×›×¢×“×™×¤×•×ª ×œ×ª×¨×’×•×œ (××•×¤×™×¢ ×¨××©×•×Ÿ).<br>
  <b>âœ– ×©×™×¢×•×¨ ×˜×¢×•×™×•×ª ×’×‘×•×”:</b> ×× ×˜×¢×™×ª ×‘Ö¾40% ×•××¢×œ×” ××”×©××œ×•×ª ×‘× ×•×©×. ×”× ×•×©××™× ×”××™×˜×™×™× ××•×¦×’×™× ×§×•×“× â€” ×›×™ ××”×™×¨×•×ª × ××•×›×” ×”×™× × ×§×•×“×ª ×ª×•×¨×¤×” ×—×©×•×‘×” ×‘×¤×¡×™×›×•××˜×¨×™.

  <h3>××™×š ×¢×•×‘×“×ª ××¢×¨×›×ª ×ª×™×§×•×Ÿ ×˜×¢×•×™×•×ª?</h3>
  ×‘×ª×¨×’×•×œ, ×›×œ ×˜×¢×•×ª × ×©××¨×ª. ×›×“×™ ×œ××—×•×§ ××•×ª×” ×¦×¨×™×š ×œ×¢× ×•×ª ×¢×œ×™×” × ×›×•×Ÿ ×¤×¢××™×™× ×‘×©× ×™ ×¡×©× ×™× ×©×œ Review ×©×•× ×™× (×¢× ×©× ×™ ××™××•× ×™× ×¨×’×™×œ×™× ×‘×™× ×™×”×).<br>
  ×›×š ××™×•×× ×•×ª × ×‘× ×™×ª ×‘×¦×•×¨×” ×™×¦×™×‘×” â€” ×œ× ×‘×”×œ× ×•×œ× ×‘××§×¨×”.

  <h3>×˜×™×¤ ×—×©×•×‘</h3>
  ××œ ×ª×™×¢×¦×¨ ×¢×œ ×©××œ×”. ×”××¢×¨×›×ª ×ª×—×–×™×¨ ××•×ª×š ×‘×“×™×•×§ ×œ×“×‘×¨×™× ×©×“×•×¨×©×™× ×—×™×–×•×§. ××ª×” ××ª×××Ÿ â€” ×œ× × ×‘×—×Ÿ.
  </div>
  `;

  const INS_EN = `
  <h2>Instructions</h2>

  <h3>Purpose</h3>
  Boost mental calculation speed, accuracy, and confidence: multiplication, powers, roots, and fractions.<br>
  The system tracks your weaknesses and adapts training automatically to maximize growth.

  <h3>Game Modes</h3>
  <b>âš”ï¸ Combat</b><br>
  Mixed questions from all topics, by difficulty. After each battle you get a performance report and precise recommendations.
  <br><br>
  <b>ğŸ“š Practice</b><br>
  Focus on a single topic. Mistakes are saved and resurfaced in structured review sessions to eliminate weaknesses over time.

  <h3>How to start</h3>
  Choose difficulty â†’ Start Battle. Timing begins only after you press Start.

  <h3>How to answer</h3>
  Keys 1â€“4, or click. Correct answers play a short chime.

  <h3>Ranking Up (avg of last 3 battles)</h3>
  â€¢ Accuracy â‰¥ 95%<br>
  â€¢ Avg response â‰¤ 1.50s<br>
  â€¢ â‰¤ 3 mistakes per battle

  <h3>HUD (side panel)</h3>
  Shows averages from the last 3 battles: Accuracy, Response speed, Mistakes, and â€œWeak Topicsâ€.

  <h3>Weakness Detection</h3>
  <b>â± Slow response:</b> >50% slower than your battle average in a topic â†’ speed-priority (listed first).<br>
  <b>âœ– High error rate:</b> â‰¥40% mistakes in a topic â†’ targeted for accuracy. Speed weaknesses appear first.

  <h3>Mistake Bank</h3>
  In practice mode, mistakes stay saved. To erase one, answer it correctly twice in two separate reviews, with normal sessions in between.

  <h3>Pro Tip</h3>
  Never freeze on a question. Flow. The system will circle back and drill exactly what you need.
  `;

  let INS_LANG = 'en';
  const modal = document.getElementById('instructionsModal');
  const box   = document.getElementById('insContent');
  const btnL  = document.getElementById('insLang');
  const btnX  = document.getElementById('insClose');

  function renderInstructions(){
    if(INS_LANG==='en'){
      box.innerHTML = INS_EN;
      btnL.textContent = '×¢×‘×¨×™×ª';
      box.removeAttribute('dir'); box.style.textAlign='start';
    } else {
      box.innerHTML = INS_HE;
      btnL.textContent = 'English';
      box.setAttribute('dir','rtl'); box.style.textAlign='right';
    }
  }

  // ×¤×ª×™×—×” â€“ ×××–×™×Ÿ ×“×œ×’×¦×™×”, ×›×™ ×”×›×¤×ª×•×¨ #instructionsBtn ××•×–×¨×§ ×¢"×™ game.js ×œ×œ×•×‘×™
  document.addEventListener('click', (e)=>{
    if(e.target && e.target.id === 'instructionsBtn'){
      modal.classList.remove('hidden');
      renderInstructions();
    }
  });

  btnX.addEventListener('click', ()=> modal.classList.add('hidden'));
  btnL.addEventListener('click', ()=> { INS_LANG = (INS_LANG==='en')?'he':'en'; renderInstructions(); });
  </script>

  <!-- ×”××©×—×§ -->
  <script src="game.js"></script>
</body>
</html>









