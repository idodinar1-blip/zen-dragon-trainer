<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zen Dragon Trainer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="style.css">

<style>
/* extra modal styles (not touching main theme) */
#instructionsModal {
  position: fixed;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(6px);
  display: none;
  justify-content:center;
  align-items:center;
  z-index:10000;
}

#instructionsBox {
  background: var(--glass);
  border: 1px solid rgba(255,255,255,.08);
  padding: 24px;
  border-radius: 16px;
  width: 90%;
  max-width: 750px;
  max-height: 90vh;
  overflow-y: auto;
  color: var(--tx);
  position: relative;
}

#closeInstructions {
  position:absolute;
  top:12px; right:12px;
  background:#ef4444;
  color:white;
  border:none;
  padding:6px 10px;
  border-radius:8px;
  cursor:pointer;
  font-weight:700;
}

#langToggle {
  position:absolute;
  top:12px; left:12px;
  background:#2b3a69;
  color:white;
  border:none;
  padding:6px 10px;
  border-radius:8px;
  cursor:pointer;
  font-weight:700;
}

.rtl { direction:rtl; text-align:right; }
</style>
</head>

<body>

<!-- âœ… Lobby -->
<section id="lobby" class="center">
<div class="box card">
<h1>Zen Dragon Trainer</h1>
<p>Sharpen the mind. Train the warrior.</p>
<button id="toCombat" class="bigbtn">âš”ï¸ Combat Mode</button>
<button id="toPractice" class="bigbtn">ğŸ“š Practice Mode</button>
<button id="openInstructions" class="bigbtn">ğŸ“– Instructions</button>
</div>
</section>

<!-- âœ… Combat Menu -->
<section id="combatMenu" class="center hidden">
<div class="box card">
<h2>Choose Battle Level</h2>
<button id="cEasy" class="btn">Easy</button>
<button id="cMed" class="btn">Medium <span id="medState" class="lock">(locked)</span></button>
<button id="cHard" class="btn">Hard <span id="hardState" class="lock">(locked)</span></button>
<br>
Length <select id="lenCombat"><option>10</option><option selected>20</option></select>
<br><br>
<button id="backFromCombat" class="btn">â¬… Back</button>
</div>
</section>

<!-- âœ… Practice Menu -->
<section id="practiceMenu" class="center hidden">
<div class="box card">
<h2>Select Topic</h2>
<button class="btn pTopic" data-topic="m">Multiplication</button>
<button class="btn pTopic" data-topic="pow">Exponents</button>
<button class="btn pTopic" data-topic="root">Roots</button>
<button class="btn pTopic" data-topic="frac">Fractions</button>
<br>
Length <select id="lenPractice"><option>20</option><option>30</option></select>
<br><br>
<button id="backFromPractice" class="btn">â¬… Back</button>
</div>
</section>

<!-- âœ… Game UI loads from game.js -->
<div id="gameScreen" class="hidden"></div>

<!-- âœ… Instructions Modal -->
<div id="instructionsModal">
  <div id="instructionsBox">
    <button id="closeInstructions">âœ– Exit</button>
    <button id="langToggle">×¢×‘×¨×™×ª</button>
    <div id="instructionsContent"></div>
  </div>
</div>

<script>
/* ===========================
      FULL INSTRUCTIONS TEXT
=========================== */

const textHE = `
<div class="rtl">

<h2>×”×•×¨××•×ª ×©×™××•×©</h2>

<b>××˜×¨×”</b><br>
××™××•×Ÿ ×××•×§×“ ×œ×¤×™×ª×•×— ××”×™×¨×•×ª, ×“×™×•×§ ×•×‘×™×˜×—×•×Ÿ ×‘×—×™×©×•×‘ ×‘×¨××©: ×œ×•×— ×›×¤×œ, ×—×–×§×•×ª, ×©×•×¨×©×™× ×•×©×‘×¨×™×.
×”××©×—×§ ××–×”×” ×—×•×œ×©×•×ª ×‘×–××Ÿ ×××ª ×•×“×•×—×£ ××•×ª×š ×œ×”×©×ª×¤×¨ ×‘×¦×•×¨×” ×—×›××” ×•×”×“×¨×’×ª×™×ª.

<br><br><b>××¦×‘×™ ××©×—×§</b>

âš”ï¸ <b>××¦×‘ ×§×¨×‘ (Combat)</b><br>
×ª×¢×¨×•×‘×ª ×©××œ×•×ª ×œ×¤×™ ×¨××ª ×§×•×©×™.  
×‘×¡×™×•× ×”×§×¨×‘ ××ª×§×‘×œ×ª ×˜×‘×œ×ª ×”×™×©×’×™×, × ×™×ª×•×— ×‘×™×¦×•×¢×™× ×•×”××œ×¦×” ××” ×œ×—×–×§.

ğŸ“š <b>××¦×‘ ×ª×¨×’×•×œ (Practice)</b><br>
×‘×—×™×¨×ª × ×•×©× ××—×“ ×•×”×¢××§×” ×‘×•. ×˜×¢×•×™×•×ª × ×©××¨×•×ª ×•××•×¤×™×¢×•×ª ×‘Ö¾Review ×™×™×¢×•×“×™.

<br><br><b>××™×š ××ª×—×™×œ×™×?</b><br>
×‘×—×™×¨×ª ×¨××” â†’ Start Battle  
×”×–××Ÿ ××ª×—×™×œ ×‘×œ×—×™×¦×” ×¢×œ Start.

<br><br><b>××™×š ×¢×•× ×™×?</b><br>
â€¢ ××§×©×™ 1â€“4  
â€¢ ×œ×—×™×¦×” ×¢×œ ×”××¡×š  
×ª×©×•×‘×” × ×›×•× ×” ×ª×©××™×¢ ×¦×œ×™×œ ğŸµ

<br><br><b>×§×¨×™×˜×¨×™×•× ×™× ×œ×¢×œ×™×™×ª ×¨××”</b><br>
(×××•×¦×¢ 3 ×”×§×¨×‘×•×ª ×”××—×¨×•× ×™×)<br>
âœ… ×“×™×•×§ â‰¥ 95%  
âœ… ×–××Ÿ â‰¤ â€1.50 ×©× ×™×•×ª  
âœ… â‰¤ 3 ×˜×¢×•×™×•×ª

<br><br><b>HUD â€” ×œ×•×— ×‘×™×¦×•×¢×™×</b><br>
â€¢ ×“×™×•×§  
â€¢ ××”×™×¨×•×ª  
â€¢ ×˜×¢×•×™×•×ª  
â€¢ Weak Topics â€” × ×•×©××™× ×—×œ×©×™×

<br><br><b>×–×™×”×•×™ ×—×•×œ×©×•×ª</b><br>
â± ××™×˜×™×•×ª â€” ×× ×‘×™×•×ª×¨ ×Ö¾50% ××”×©××œ×•×ª ×”×™×™×ª ××™×˜×™ ××”×××•×¦×¢  
âœ– â‰¥40% ×˜×¢×•×™×•×ª ×‘×ª×—×•×  
*× ×•×©××™× ××™×˜×™×™× ×§×•×“××™× â€” ×–××Ÿ ×”×•× ×§×¨×™×˜×™!*

<br><br><b>××¢×¨×›×ª ×ª×™×§×•×Ÿ ×˜×¢×•×™×•×ª</b><br>
×˜×¢×•×ª × ××—×§×ª ×¨×§ ××—×¨×™:  
âœ”ï¸ ×ª×©×•×‘×” × ×›×•× ×” Ã—2  
âœ”ï¸ ×‘×©× ×™ ×¡×©× ×™ Review ×©×•× ×™×  
âœ”ï¸ ×¢× ××™××•× ×™× ×¨×’×™×œ×™× ×‘×™× ×™×”×

<br><br><b>×˜×™×¤</b><br>
×œ× × ×ª×§×¢×™× â€” ×–×•×¨××™×.  
×”××¢×¨×›×ª ×ª×—×–×™×¨ ××•×ª×š ×‘×“×™×•×§ ×œ××” ×©×—×™×™×‘ ×—×™×–×•×§. âš¡

</div>
`;

const textEN = `
<h2>Instructions</h2>

<b>Purpose</b><br>
Train speed, accuracy, and confidence in mental math: multiplication, powers, roots, and fractions.
Adaptive system that identifies weaknesses and improves you continuously.

<br><br><b>Modes</b>

âš”ï¸ <b>Combat</b><br>
Mixed topics by difficulty + report + recommendations.

ğŸ“š <b>Practice</b><br>
Focus on one topic. Mistakes saved & reviewed later.

<br><br><b>How to start</b><br>
Choose difficulty â†’ Start Battle  
Timer starts only after pressing start.

<br><br><b>How to answer</b><br>
â€¢ Keys 1â€“4  
â€¢ Click answer  
Correct = short chime ğŸµ

<br><br><b>Rank Up Rules</b><br>
(avg of last 3 battles)<br>
âœ… â‰¥ 95% accuracy  
âœ… â‰¤ 1.50s avg time  
âœ… â‰¤ 3 mistakes

<br><br><b>HUD tracks</b><br>
â€¢ Accuracy  
â€¢ Speed  
â€¢ Mistakes  
â€¢ Weak Topics

<br><br><b>Weakness logic</b><br>
â± Slow >50%  
âœ– â‰¥40% errors  
Speed weaknesses appear first â€” time matters.

<br><br><b>Mistake Bank</b><br>
2 correct answers across 2 separate review sessions to clear a mistake.

<br><br><b>Pro Tip</b><br>
Don't freeze â€” flow. The system will drill what you need.
`;

let lang = "en";
function renderInstructions(){
  instructionsContent.innerHTML = lang==='en' ? textEN : textHE;
  langToggle.textContent = lang==='en' ? "×¢×‘×¨×™×ª" : "English";
}

/* buttons */
openInstructions.onclick = () => { instructionsModal.style.display = "flex"; renderInstructions(); }
closeInstructions.onclick = () => { instructionsModal.style.display = "none"; }
langToggle.onclick = () => { lang = lang === "en" ? "he" : "en"; renderInstructions(); };
</script>

<!-- âœ… Load the actual game engine -->
<script src="game.js"></script>

</body>
</html>




