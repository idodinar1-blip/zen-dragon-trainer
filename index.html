<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Zen Dragon Trainer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#111;color:#eee;margin:0;height:100vh;overflow:hidden}
.hidden{display:none!important}
.center{display:flex;justify-content:center;align-items:center;height:100%;width:100%}
.card{background:#1c1c1c;padding:24px;border-radius:14px;box-shadow:0 0 25px rgba(0,255,255,.2);text-align:center;max-width:420px}
.bigbtn{background:#0af;border:0;padding:14px 20px;border-radius:10px;margin:8px;font-size:18px;cursor:pointer;color:white;font-weight:bold}
.bigbtn:hover{background:#09c}
.btn{background:#444;border:0;padding:10px 14px;border-radius:8px;margin:4px;color:white;cursor:pointer}
.btn:hover{background:#555}

#side{position:absolute;left:0;top:0;width:220px;padding:16px;background:#0009;border-right:1px solid #0af;height:100%}
.metric{margin-bottom:12px;text-align:left}
.label{font-size:12px;color:#aaa}
.value{font-size:20px;font-weight:bold}
.hint{font-size:12px;color:#888;margin-top:10px}
#summary,#instructionsScreen{position:absolute;top:0;left:0;width:100%;height:100%;background:#000d;display:none;justify-content:center;align-items:center;z-index:50}
.instructionsBox{background:#1c1c1c;padding:24px;border-radius:16px;max-width:700px;max-height:90vh;overflow-y:auto;text-align:start}
.langBtn{float:right;margin-bottom:12px}
.rtl{direction:rtl;text-align:right}
</style>

</head>
<body>

<div id="app">

<!-- LOBBY -->
<section id="lobby" class="center">
<div class="card">
<h2>Zen Dragon Trainer</h2>
<button id="toCombat" class="bigbtn">âš”ï¸ Combat</button>
<button id="toPractice" class="bigbtn">ğŸ“š Practice</button>
<button id="toInstructions" class="bigbtn">ğŸ“– Instructions</button>
</div>
</section>

<!-- COMBAT MENU -->
<section id="combatMenu" class="center hidden">
<div class="card">
<h3>Choose Battle Level</h3>
<button id="cEasy" class="btn">Easy</button>
<button id="cMed" class="btn">Medium <span id="medState">(locked)</span></button>
<button id="cHard" class="btn">Hard <span id="hardState">(locked)</span></button>
<br>Length <select id="lenCombat"><option>10</option><option selected>20</option></select><br><br>
<button id="backFromCombat" class="btn">â¬… Back</button>
</div>
</section>

<!-- PRACTICE MENU -->
<section id="practiceMenu" class="center hidden">
<div class="card">
<h3>Select Topic</h3>
<button class="btn pTopic" data-topic="m">Multiplication</button>
<button class="btn pTopic" data-topic="pow">Exponents</button>
<button class="btn pTopic" data-topic="root">Roots</button>
<button class="btn pTopic" data-topic="frac">Fractions</button>
<br>Length <select id="lenPractice"><option>20</option><option>30</option></select><br><br>
<button id="backFromPractice" class="btn">â¬… Back</button>
</div>
</section>

<!-- GAME -->
<section id="game" class="hidden">
<div id="side">
<div class="metric"><div class="label">Accuracy</div><div id="hudAcc" class="value">â€”</div></div>
<div class="metric"><div class="label">Avg Time</div><div id="hudSpd" class="value">â€”</div></div>
<div class="metric"><div class="label">Mistakes</div><div id="hudBank" class="value">â€”</div></div>
<div class="metric"><div class="label">Weak Topics</div><div id="hudWeak" class="value">â€”</div></div>
<div class="hint">Target: 95% â€¢ â‰¤1.5s â€¢ â‰¤3</div>
<button id="homeBtn" class="btn">ğŸ  Home</button>
</div>

<div class="card" style="max-width:600px;margin:auto">
<h1 id="gameTitle">Zen Dragon</h1>
<div class="bar"><span id="barFill" style="display:block;height:6px;width:0;background:#0af;border-radius:6px"></span></div>
<div id="startWrap"><button id="startBtn" class="bigbtn">Start</button></div>
<div id="q" class="q" style="font-size:40px;display:none">Ã—</div>
<div id="opts" class="options" style="display:grid;grid-template-columns:1fr 1fr;gap:12px;"></div>
<div id="progress" class="mini">0%</div>
</div>
</section>

<!-- SUMMARY -->
<div id="summary" class="center">
<div class="card">
<h3>Session Report</h3>
<div id="sumLines"></div><br>
<div id="sumPracticeExtra"></div>
<div id="summaryButtons"></div><br>
<button id="btnHome" class="bigbtn">ğŸ  Home</button>
</div>
</div>

<!-- ğŸ“– INSTRUCTIONS SCREEN -->
<div id="instructionsScreen" class="center">
<div class="instructionsBox">
<button id="closeInstructions" class="btn">âœ–</button>
<button id="langToggle" class="btn langBtn">×¢×‘×¨×™×ª</button>
<div id="instructionsText"></div>
</div>
</div>

</div>

<script>
/* ========== TEXT CONTENT ========== */
const textEN = `
<h2>Instructions</h2>
<b>Goal:</b> faster, sharper, confident mental math.<br><br>
âš”ï¸ <b>Combat:</b> mixed topics, difficulty based<br>
ğŸ“š <b>Practice:</b> focus on one topic with built-in mistake review<br><br>
<b>Progress rules (avg of last 3 battles):</b><br>
âœ… 95% accuracy or higher<br>
âœ… â‰¤ 1.50s average response<br>
âœ… â‰¤ 3 mistakes<br><br>
<b>Weak topic logic:</b><br>
â± Slow: >50% slower than avg<br>
âœ– Wrong: â‰¥40% mistakes in topic<br><br>
Tip â€” donâ€™t freeze. Flow. The system brings weak topics back automatically.
`;

const textHE = `
<div class="rtl">
<h2>×”×•×¨××•×ª ×©×™××•×©</h2>
<b>××˜×¨×”:</b> ×—×™×©×•×‘ ××”×™×¨ ×•××“×•×™×§ ×‘×¨××©, ×¢× ×‘×™×˜×—×•×Ÿ ×•×–×¨×™××”.<br><br>
âš”ï¸ <b>××¦×‘ ×§×¨×‘:</b> ×¢×¨×‘×•×‘ ×ª×—×•××™× ×œ×¤×™ ×¨××”<br>
ğŸ“š <b>×ª×¨×’×•×œ:</b> × ×•×©× ×‘×•×“×“ + ××¢×¨×›×ª ×ª×™×§×•×Ÿ ×˜×¢×•×™×•×ª ×—×›××”<br><br>
<b>×›×œ×œ×™ ×”×ª×§×“××•×ª (×××•×¦×¢ 3 ×§×¨×‘×•×ª):</b><br>
âœ… ×“×™×•×§ â‰¥ 95%<br>
âœ… ×–××Ÿ ×ª×’×•×‘×” â‰¤ â€1.50 ×©× ×™×•×ª<br>
âœ… â‰¤ 3 ×˜×¢×•×™×•×ª<br><br>
<b>××™×ª×•×¨ × ×•×©××™× ×—×œ×©×™×:</b><br>
â± ××™×˜×™×•×ª: ×‘×™×•×ª×¨ ×Ö¾50% ××”×©××œ×•×ª ×”×™×™×ª ××™×˜×™ ××”×××•×¦×¢<br>
âœ– ×©×’×™××•×ª: ×œ×¤×—×•×ª 40% ×˜×¢×•×™×•×ª ×‘××•×ª×• × ×•×©×<br><br>
ğŸ’¡ <b>×˜×™×¤:</b> ×œ× × ×ª×§×¢×™×. ×××©×™×›×™× ×œ×¢× ×•×ª â€” ×”××¢×¨×›×ª ×ª×—×–×™×¨ ××•×ª×š ×œ××” ×©×¦×¨×™×š.
</div>
`;

let lang = "en";
const setInstructions = ()=> {
  const el = document.getElementById("instructionsText");
  el.innerHTML = lang==="en" ? textEN : textHE;
  document.getElementById("langToggle").textContent = lang==="en" ? "×¢×‘×¨×™×ª" : "English";
};
document.getElementById("langToggle").onclick = ()=>{ lang = lang==="en"?"he":"en"; setInstructions(); };
document.getElementById("toInstructions").onclick = ()=>{ document.getElementById("instructionsScreen").style.display="flex"; setInstructions(); };
document.getElementById("closeInstructions").onclick = ()=>{ document.getElementById("instructionsScreen").style.display="none"; };

/* ========= HERE LOAD YOUR EXISTING GAME JS ========== */
/* âœ… ×¢×›×©×™×• ××ª×” ××“×‘×™×§ ×¤×” ××ª ×›×œ game.js ×©×œ×š ×›××• ×©×”×•× */
</script>

<script src="game.js"></script>
</body>
</html>

