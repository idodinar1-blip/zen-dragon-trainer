<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Zen Dragon Trainer</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />

<link rel="stylesheet" href="style.css" />

<style>
/* Modal for instructions */
#instructionsModal{
  position:fixed; inset:0; background:rgba(0,0,0,.75);
  backdrop-filter:blur(6px);
  display:none; align-items:center; justify-content:center; z-index:9999;
}
#instructionsBox{
  background:#0f1830; border:1px solid #27345d; border-radius:18px;
  padding:26px; width:90%; max-width:760px; max-height:85vh; overflow-y:auto;
}
.langToggle{float:right; margin-bottom:10px}
.rtl{direction:rtl; text-align:right}
</style>

</head>
<body>

<!-- LOBBY -->
<section id="lobby" class="center" style="height:100vh;">
  <div class="box card">
    <h1 style="font-size:42px; margin-bottom:10px;">Zen Dragon Trainer</h1>
    <div style="opacity:.75; margin-bottom:26px; font-size:20px;">
      Sharpen the mind. Train the warrior.
    </div>

    <button id="toCombat" class="bigbtn">âš”ï¸ Combat Mode</button>
    <button id="toPractice" class="bigbtn">ğŸ“š Practice Mode</button>
    <button id="openInstructions" class="bigbtn">ğŸ“– Instructions</button>
  </div>
</section>

<!-- COMBAT MENU -->
<section id="combatMenu" class="hidden center" style="height:100vh;">
<div class="box card">
  <h2>Choose Battle Level</h2>
  <button id="cEasy" class="btn">Easy</button>
  <button id="cMed" class="btn">Medium <span id="medState" class="lock">(locked)</span></button>
  <button id="cHard" class="btn">Hard <span id="hardState" class="lock">(locked)</span></button>
  <div class="badge">Length:
    <select id="lenCombat">
      <option>10</option><option selected>20</option>
    </select>
  </div>
  <button id="backFromCombat" class="btn">â¬… Back</button>
</div>
</section>

<!-- PRACTICE MENU -->
<section id="practiceMenu" class="hidden center" style="height:100vh;">
<div class="box card">
  <h2>Select Topic</h2>
  <button class="btn pTopic" data-topic="m">Multiplication</button>
  <button class="btn pTopic" data-topic="pow">Exponents</button>
  <button class="btn pTopic" data-topic="root">Roots</button>
  <button class="btn pTopic" data-topic="frac">Fractions</button>

  <div class="badge">Length:
    <select id="lenPractice"><option>20</option><option>30</option></select>
  </div>

  <button id="backFromPractice" class="btn">â¬… Back</button>
</div>
</section>

<!-- GAME -->
<section id="game" class="hidden">
  <!-- HUD in game.js renders here -->
</section>

<!-- SUMMARY -->
<div id="summary"></div>

<!-- ğŸ“˜ INSTRUCTIONS MODAL -->
<div id="instructionsModal">
  <div id="instructionsBox">
    <button id="closeInstructions" class="btn">âœ–</button>
    <button id="langToggle" class="btn langToggle">×¢×‘×¨×™×ª</button>
    <div id="instructionsContent"></div>
  </div>
</div>

<script>
/* === instructions text === */

const instEN = `
<h2>How to Play</h2>
<b>Goal:</b> faster, sharper mental math.<br><br>
âš”ï¸ <b>Combat:</b> mixed topics, ranked improvement<br>
ğŸ“š <b>Practice:</b> one topic + mistake review<br><br>
<b>Progress rules (3 battles avg):</b><br>
âœ… Accuracy â‰¥ 95%<br>âœ… Avg â‰¤ 1.50s<br>âœ… â‰¤ 3 mistakes<br><br>
<b>Weak topics:</b><br>
â±       slow > 50% of Qs<br>
âœ–       â‰¥ 40% errors<br><br>
Tip: keep moving â€” system brings weak topics back.
`;

const instHE = `
<div class="rtl">
<h2>×”×¡×‘×¨ ×©×™××•×©</h2>
<b>××˜×¨×”:</b> ×—×©×™×‘×” ××”×™×¨×”, ××“×•×™×§×ª ×•×‘×‘×™×˜×—×•×Ÿ.<br><br>
âš”ï¸ <b>×§×¨×‘:</b> ×ª×¨×’×•×œ ××©×•×œ×‘ ×œ×¤×™ ×¨××”<br>
ğŸ“š <b>×ª×¨×’×•×œ:</b> × ×•×©× ××—×“ + ×ª×™×§×•×Ÿ ×˜×¢×•×™×•×ª<br><br>
<b>×”×ª×§×“××•×ª (×××•×¦×¢ 3 ×§×¨×‘×•×ª):</b><br>
âœ… ×“×™×•×§ â‰¥ â€95%<br>âœ… ×–××Ÿ â‰¤ â€1.50 ×©× ×™×•×ª<br>âœ… â‰¤ â€3 ×˜×¢×•×™×•×ª<br><br>
<b>× ×•×©××™× ×—×œ×©×™×:</b><br>
â± ××™×˜×™×•×ª > â€50% ××”×©××œ×•×ª<br>
âœ– ×˜×¢×•×™×•×ª â‰¥ â€40% ×‘×ª×—×•×<br><br>
×˜×™×¤: ×œ× × ×ª×§×¢×™× â€” ×××©×™×›×™×, ×•×”××¢×¨×›×ª ×ª×“××’ ×œ×”×—×–×™×¨ ×œ××” ×©×¦×¨×™×š.
</div>
`;

let lang = "en";
function renderInst(){
  document.getElementById("instructionsContent").innerHTML =
    lang==="en" ? instEN : instHE;
  document.getElementById("langToggle").textContent =
    lang==="en" ? "×¢×‘×¨×™×ª" : "English";
}

document.getElementById("openInstructions").onclick = ()=>{
  document.getElementById("instructionsModal").style.display="flex";
  renderInst();
};
document.getElementById("closeInstructions").onclick = ()=>{
  document.getElementById("instructionsModal").style.display="none";
};
document.getElementById("langToggle").onclick = ()=>{
  lang = lang==="en" ? "he" : "en";
  renderInst();
};

/* === page nav hooks (game.js already handles HUD & gameplay) === */
function show(id){
  ["lobby","combatMenu","practiceMenu","game"].forEach(s=>{
    document.getElementById(s)?.classList.add("hidden");
  });
  document.getElementById(id)?.classList.remove("hidden");
}

document.getElementById("toCombat").onclick = ()=>show("combatMenu");
document.getElementById("toPractice").onclick = ()=>show("practiceMenu");
document.getElementById("backFromCombat").onclick = ()=>show("lobby");
document.getElementById("backFromPractice").onclick = ()=>show("lobby");
</script>

<script src="game.js"></script>
</body>
</html>




